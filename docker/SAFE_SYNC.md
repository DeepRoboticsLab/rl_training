# 학습 중 코드 전송 안전 가이드

## ✅ 학습 중 코드 전송해도 되는가?

**일반적으로 안전합니다!** 하지만 몇 가지 주의사항이 있습니다.

## 🔍 이유

1. **실행 중인 프로세스는 이미 메모리에 코드를 로드함**
   - 학습 프로세스가 시작될 때 필요한 코드를 메모리에 올립니다
   - 파일 시스템의 파일을 변경해도 **이미 실행 중인 프로세스에는 영향이 없습니다**

2. **새 파일 추가는 문제 없음**
   - 새 파일을 추가하는 것은 기존 실행 중인 프로세스에 영향을 주지 않습니다
   - 학습이 끝난 후 다음 실행 시에만 새 코드가 사용됩니다

3. **기존 파일 수정도 일반적으로 안전**
   - Python은 모듈을 처음 import할 때만 파일을 읽습니다
   - 실행 중인 프로세스는 이미 로드된 코드를 사용하므로 파일 변경의 영향을 받지 않습니다

## ⚠️ 주의사항

### 1. 학습 프로세스가 파일을 계속 읽는 경우

일부 학습 프레임워크가 설정 파일을 주기적으로 읽는 경우:
- **대부분의 경우 문제 없음**: Isaac Lab/RSL-RL은 시작 시에만 설정을 읽습니다

### 2. 파일 충돌

여러 프로세스가 동시에 같은 파일을 수정하려고 할 때:
- **rsync는 원자적으로 동작**: 파일을 임시 위치에 쓰고 나중에 이동하므로 안전합니다

### 3. 모듈 다시 로드

학습 중에 Python 모듈을 다시 import하는 경우:
- **일반적으로 발생하지 않음**: 학습 스크립트는 시작 시에만 모듈을 import합니다

## 🎯 권장 사항

### 안전한 방법 (권장)

```bash
# 학습이 끝난 후 전송 (가장 안전)
# 또는

# 학습 중 전송해도 되지만, 다음 실행 시 새 코드 사용 확인
bash docker/sync_all_code.sh user@server:/workspace/rl_training

# 전송 후 서버에서 파일 상태 확인
ssh user@server 'ls -la /workspace/rl_training/source/rl_training/...'
```

### 학습 중 전송 시 체크리스트

- [ ] 학습 프로세스가 정상 실행 중인지 확인
- [ ] 전송 후 서버에서 파일이 올바르게 전송되었는지 확인
- [ ] 다음 학습 실행 시 새 코드가 사용되는지 확인

## 📝 실제 시나리오

### 시나리오 1: 학습 중 코드 전송

```bash
# 서버에서 학습 실행 중...
# (다른 터미널에서) 로컬에서 코드 전송
bash docker/sync_all_code.sh user@server:/workspace/rl_training

# 결과: 현재 실행 중인 학습은 계속 진행됨
#       다음 학습 실행 시 새 코드 사용
```

### 시나리오 2: 학습 완료 후 코드 전송 (더 안전)

```bash
# 1. 학습 완료 대기
# 2. 코드 전송
bash docker/sync_all_code.sh user@server:/workspace/rl_training
# 3. 다음 학습 시작
```

## ✅ 결론

**학습 중 코드 전송은 일반적으로 안전합니다!**

- ✅ 현재 실행 중인 학습에는 영향 없음
- ✅ 새 파일 추가는 문제 없음
- ✅ 다음 실행 시 새 코드 사용

**하지만 더 안전하게 하려면:**
- 학습이 끝난 후 전송
- 또는 전송 후 다음 실행 전에 코드 확인

## 🔧 문제 발생 시

만약 전송 후 문제가 발생한다면:

1. 서버에서 파일 확인
   ```bash
   ssh user@server 'ls -la /workspace/rl_training/source/...'
   ```

2. 학습 프로세스 재시작 (필요시)
   ```bash
   # 현재 학습은 계속 진행, 다음 학습부터 새 코드 사용
   ```

3. Git으로 코드 복구 (필요시)
   ```bash
   ssh user@server
   cd /workspace/rl_training
   git checkout -- <file>
   ```

